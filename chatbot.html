<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yati â€” Mental Health Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 min-h-screen flex items-center justify-center text-white">

  <div class="w-full max-w-lg bg-gray-800 rounded-2xl shadow-xl overflow-hidden">
    <div class="px-5 py-4 bg-gray-900 border-b border-gray-700 flex items-center gap-2">
      <div class="w-2.5 h-2.5 rounded-full bg-teal-400 animate-pulse"></div>
      <h1 class="text-lg font-semibold">Yati</h1>
    </div>

    <div id="chat" class="h-[70vh] overflow-y-auto p-4 space-y-3 bg-gray-800"></div>

    <form id="chat-form" class="flex items-center gap-2 p-3 bg-gray-900 border-t border-gray-700">
      <input id="user-input" type="text" placeholder="Type your answer..."
        class="flex-1 px-4 py-2 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none" />
      <button type="submit"
        class="px-4 py-2 rounded-lg bg-teal-600 hover:bg-teal-500">Send</button>
    </form>
  </div>

  <script>
    const BOOKING_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdG8BIw4bHRIJ9MgZ_A7yA3Qvmx2fvqo_Lr2DuEZqlGXorX1A/viewform?usp=sharing";

    const chat = document.getElementById('chat');
    const form = document.getElementById('chat-form');
    const input = document.getElementById('user-input');

    function bubble(text, sender = 'bot') {
      const row = document.createElement('div');
      row.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
      const b = document.createElement('div');
      b.className =
        `max-w-[80%] px-4 py-2 rounded-2xl text-sm leading-relaxed shadow 
        ${sender === 'user' ? 'bg-teal-300 text-teal-900 rounded-br-none' : 'bg-teal-700 text-white rounded-bl-none'}`;
      b.innerHTML = text;
      row.appendChild(b);
      chat.appendChild(row);
      chat.scrollTop = chat.scrollHeight;
    }

    const answers = {};
    const questions = [
      { id: "name", text: "Hi, Iâ€™m Yati ðŸ˜Š Whatâ€™s your first name?" },
      { id: "mood", text: "How are you feeling today?" },
      { id: "duration", text: "Has this been going on for more than two weeks?" },
      { id: "impact", text: "Is it affecting your daily life (sleep, work, focus)?" },
      { id: "help", text: "Would you like to book a therapy session?" }
    ];

    let qIndex = 0;

    function askNextQuestion() {
      if (qIndex < questions.length) {
        bubble(questions[qIndex].text);
      } else {
        bubble(`Thanks for sharing. You can book a therapy session here: <a href="${BOOKING_FORM_URL}" target="_blank" class="underline">Book Therapy</a>`);
      }
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const text = input.value.trim();
      if (!text) return;
      bubble(text, 'user');
      answers[questions[qIndex].id] = text;
      input.value = "";
      qIndex++;
      setTimeout(askNextQuestion, 500);
    });

    window.onload = () => {
      askNextQuestion();
    }
  </script>
</body>
</html>
