<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yati Chatbot</title>
  <link href="styles.css" rel="stylesheet" />
</head>
<body>
  <div id="chat-container">
    <!-- Header -->
    <div id="chat-header">
      <img src="bot.jpg" alt="Yati" class="bot-avatar"/>
      <span class="chat-title">Yati</span>
    </div>

    <!-- Chat area -->
    <div id="chat">
      <!-- Messages will be injected here -->
    </div>

    <!-- Input area -->
    <div id="chat-input">
      <input type="text" id="user-input" placeholder="Type your message..." />
      <button id="send-btn">Send</button>
    </div>

    <!-- Footer -->
    <div id="chat-footer">
      &copy; 2025 Yati. All rights reserved.
    </div>
  </div>

  <script>
    const chat = document.getElementById('chat');
    const sendBtn = document.getElementById('send-btn');
    const userInput = document.getElementById('user-input');

    const questions = [
      "Hi! How are you feeling today?",
      "Are you experiencing stress, anxiety, or sadness lately?",
      "Would you like to share whatâ€™s been troubling you?",
      "On a scale of 1-10, howâ€™s your energy level today?"
    ];

    let currentQuestion = 0;

    function appendMessage(text, sender, html = false) {
      const row = document.createElement('div');
      row.className = `message-row ${sender}`;

      const avatar = document.createElement('img');
      avatar.src = sender === 'user' ? 'customer.jpg' : 'bot.jpg';
      avatar.alt = sender === 'user' ? 'You' : 'Yati';
      avatar.className = 'avatar';

      const bubble = document.createElement('div');
      bubble.className = `message-bubble ${sender}`;
      if (html) {
        bubble.innerHTML = text;
      } else {
        bubble.innerText = text;
      }

      row.appendChild(avatar);
      row.appendChild(bubble);
      chat.appendChild(row);

      // Smooth scroll to bottom
      chat.scrollTo({ top: chat.scrollHeight, behavior: 'smooth' });
    }

    function botAskQuestion() {
      if (currentQuestion < questions.length) {
        appendMessage(questions[currentQuestion], 'bot');
      } else {
        appendMessage(
          `<b>Thank you for sharing with me.</b><br>
           <a href="https://example.com/book" target="_blank" class="book-btn">Book a Session</a>`,
          'bot',
          true
        );
      }
    }

    function processUserInput() {
      const text = userInput.value.trim();
      if (!text) return;

      appendMessage(text, 'user');

      // Motivation if user feels bad
      if (text.toLowerCase().includes('sad') || text.toLowerCase().includes('anxious') || text.toLowerCase().includes('not good')) {
        appendMessage("Iâ€™m really proud of you for sharing this. Remember, you are stronger than you think ðŸ’ª", 'bot');
      }

      userInput.value = '';
      currentQuestion++;
      setTimeout(botAskQuestion, 800);
    }

    sendBtn.addEventListener('click', processUserInput);
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') processUserInput();
    });

    // Start chat
    botAskQuestion();
  </script>
</body>
</html>
