<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mental Health Chatbot</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-background text-foreground font-[Comfortaa]">

  <!-- Chat Container -->
  <div class="flex flex-col items-center justify-center min-h-screen p-4">
    <div class="glass-card w-full max-w-lg p-6">
      <h1 class="text-2xl font-bold mb-4 text-center">Your Mental Health Companion</h1>
      
      <div id="chat-box" class="space-y-4 mb-4 max-h-[400px] overflow-y-auto">
        <!-- Messages will be injected here -->
      </div>

      <div class="flex gap-2">
        <input 
          id="user-input" 
          type="text" 
          placeholder="Type your answer..." 
          class="flex-1 px-4 py-2 border rounded-lg border-border focus:outline-none focus:ring-2 focus:ring-primary-light"
        />
        <button 
          id="send-btn" 
          class="btn-primary px-4 py-2"
        >
          Send
        </button>
      </div>
    </div>
  </div>

  <script>
    const questions = [
      "Hi there! How are you feeling today?",
      "Have you been feeling stressed or anxious lately?",
      "Are you getting enough sleep and rest?",
      "Do you have someone to talk to when you're feeling low?",
      "Would you like to book a session with a therapist?"
    ];

    const motivationalBoosts = {
      anxious: "Remember, it's okay to feel this way. Take a deep breath â€” you are stronger than you think ðŸ’™",
      stressed: "Stress is temporary, but your strength is lasting ðŸŒ¿",
      depressed: "You matter, and your story isnâ€™t over yet ðŸŒˆ",
      default: "Every step you take towards self-care is a step towards a brighter tomorrow ðŸŒŸ"
    };

    let currentQuestion = 0;
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');

    function addMessage(text, sender = 'bot') {
      const msg = document.createElement('div');
      msg.classList.add('p-3', 'rounded-lg', 'max-w-[80%]', sender === 'bot' ? 'bg-primary-light self-start' : 'bg-secondary-light self-end');
      msg.innerText = text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function askNextQuestion() {
      if (currentQuestion < questions.length) {
        addMessage(questions[currentQuestion], 'bot');
      } else {
        // Final message with Book a Session button
        const finalDiv = document.createElement('div');
        finalDiv.classList.add('p-3', 'rounded-lg', 'bg-primary-light', 'self-start', 'flex', 'flex-col', 'items-start', 'gap-2');
        finalDiv.innerHTML = `
          <p>Youâ€™ve completed the check-in. If youâ€™d like, you can book a session now ðŸ’¬</p>
          <a href="https://example.com/book" target="_blank" class="btn-secondary">Book a Session</a>
        `;
        chatBox.appendChild(finalDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
      }
    }

    sendBtn.addEventListener('click', () => {
      const userText = userInput.value.trim();
      if (!userText) return;

      addMessage(userText, 'user');

      // Add motivational boost if needed
      if (userText.toLowerCase().includes('anxious')) {
        addMessage(motivationalBoosts.anxious);
      } else if (userText.toLowerCase().includes('stressed')) {
        addMessage(motivationalBoosts.stressed);
      } else if (userText.toLowerCase().includes('depressed')) {
        addMessage(motivationalBoosts.depressed);
      } else if (userText.toLowerCase().includes('not good')) {
        addMessage(motivationalBoosts.default);
      }

      currentQuestion++;
      setTimeout(askNextQuestion, 600);
      userInput.value = '';
    });

    // Start the chat
    askNextQuestion();
  </script>
</body>
</html>
